import{a as _}from"./chunk-RM2XG5VB.js";import{a as E}from"./chunk-3OT5IHQ2.js";import{O as x}from"./chunk-GK747CHS.js";import{Ca as g,Da as v,Ia as b,Ja as o,Ka as s,La as d,Qa as C,Ra as S,ab as m,ad as k,cb as y,na as l,qa as c,sa as h,sb as u}from"./chunk-HGIDUMG6.js";import{m as f}from"./chunk-DDPKQVXB.js";function L(t,i){t&1&&(o(0,"div",3),m(1," Loading "),s())}function j(t,i){if(t&1&&(o(0,"div",6),d(1,"qr-code",7),s(),o(2,"p",8),m(3),s()),t&2){let p=S();l(),b("value",p.qrLink)("margin",1),l(2),y(" ",p.message," ")}}var $=(()=>{let i=class i{constructor(e,n,a){this.modalCtrl=e,this.apiService=n,this.authService=a,this.message=u({}),this.type=u(),this.loader=!0}ngOnInit(){console.log(this.message,"data",this.type),this.generateLink(this.authService.userObjData.uid)}ngAfterViewInit(){setTimeout(()=>{let e=document.getElementById("yesbtn");e&&e.focus()},1e3)}onSubmit(e){this.modalCtrl.dismiss(e)}onCancel(){this.modalCtrl.dismiss(null)}generateLink(e){return f(this,null,function*(){return new Promise((n,a)=>{this.authService.generateToken(e).subscribe(r=>{this.type=="plan-select"?this.qrLink=`https://ifyoucanmove.com/login-from-mobile?token=${r.token}&email=${this.authService.userObjData.email}&page=subscribe`:this.qrLink=`https://ifyoucanmove.com/login-from-mobile?token=${r.token}&email=${this.authService.userObjData.email}&page=manage_subscription`,console.log("this.qrLink",this.qrLink),this.loader=!1},r=>{console.log("Err token",r),this.loader=!1,a(r)})})})}};i.\u0275fac=function(n){return new(n||i)(c(k),c(E),c(x))},i.\u0275cmp=h({type:i,selectors:[["app-subscribe-dialog"]],inputs:{message:[1,"message"],type:[1,"type"]},decls:8,vars:1,consts:[[1,"modal-content","p-3"],[1,"modal-header","d-flex","justify-content-between"],[1,"modal-body"],[1,"d-flex","m-5","justify-content-center","align-items-center","text-white",2,"min-height","200px"],[1,"modal-footer"],[1,"btn","btn-secondary-custom",3,"click"],[1,"qrcode","d-flex","justify-content-center","mt-2"],["size","300","lightColor","#ffff","errorCorrectionLevel","M",3,"value","margin"],[1,"text-white","my-3","text-center"]],template:function(n,a){n&1&&(o(0,"div",0),d(1,"div",1),o(2,"div",2),g(3,L,2,0,"div",3)(4,j,4,3),s(),o(5,"div",4)(6,"button",5),C("click",function(){return a.onCancel()}),m(7,"Close"),s()()()),n&2&&(l(3),v(a.loader?3:4))},dependencies:[_],encapsulation:2});let t=i;return t})();export{$ as a};
