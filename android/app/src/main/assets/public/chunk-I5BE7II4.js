import{a as q}from"./chunk-MGRSP4XQ.js";import"./chunk-RM2XG5VB.js";import{a as Q}from"./chunk-3OT5IHQ2.js";import{a as Y}from"./chunk-QIL4TVBT.js";import{O as W}from"./chunk-GK747CHS.js";import"./chunk-ZFIWIRC4.js";import{Bb as O,Ca as s,Da as d,Eb as k,Fc as j,Gc as B,Hc as A,Ia as b,Ja as n,Jb as T,Jc as N,Ka as e,Kc as R,La as I,Mc as V,P as v,Pa as M,Pc as z,Qa as w,Qc as L,Ra as m,Rb as U,Sc as F,U as S,V as P,Yc as G,ab as i,ad as H,bb as u,cb as p,ka as D,lb as f,mb as h,na as o,nb as C,qa as x,sa as E,wa as y}from"./chunk-HGIDUMG6.js";import"./chunk-ADY6KXU2.js";import"./chunk-JFHB5KU2.js";import"./chunk-D2WB2TDK.js";import"./chunk-XWSGAIXU.js";import"./chunk-I5IPTR26.js";import"./chunk-4XLORUIW.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-O4PCMGUI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{m as g}from"./chunk-DDPKQVXB.js";function K(a,r){if(a&1&&(n(0,"ion-card",1)(1,"ion-card-header")(2,"ion-card-title",13),i(3," YOUR MOVE SUBSCRIPTION HAS BEEN CANCELLED "),e()(),n(4,"ion-card-content")(5,"ul")(6,"li"),i(7,"Cancellation will be effective at the end of you current billing period on "),n(8,"strong",14),i(9),f(10,"date"),e()(),n(11,"li"),i(12,"Restart Your subscription anytime. We will remember your favourites and viewing preferences."),e()()()()),a&2){let t=m(2);o(9),u(C(10,1,t.subscriptionCancellationData==null||t.subscriptionCancellationData.data==null?null:t.subscriptionCancellationData.data.cancellation_effective_date,"MM/dd/y"))}}function X(a,r){a&1&&(n(0,"span",10),i(1,"Active"),e())}function Z(a,r){if(a&1&&(n(0,"span"),i(1),f(2,"date"),e()),a&2){let t=m(2);o(),p(" - set to cancel on ",C(2,1,t.subscriptionCancellationData==null||t.subscriptionCancellationData.data==null?null:t.subscriptionCancellationData.data.cancellation_effective_date,"MM/dd/y")," ")}}function $(a,r){a&1&&(n(0,"p",8)(1,"span",10),i(2,"Not Active"),e()())}function tt(a,r){a&1&&(n(0,"p",8)(1,"span",10),i(2,"Paused"),e()())}function et(a,r){if(a&1&&(n(0,"span",10),i(1),e()),a&2){let t=m(3);o(),u(t.plan)}}function it(a,r){if(a&1&&(n(0,"p",8),i(1," Plan: "),s(2,et,2,1,"span",10),e()),a&2){let t=m(2);o(2),d(t.plan?2:-1)}}function nt(a,r){a&1&&(n(0,"div",11)(1,"h3",8),i(2," Subscribe to the "),n(3,"span",15),i(4,"MOVE Monthly"),e(),i(5," or "),n(6,"span",15),i(7,"Annual Online Gym Membership"),e(),i(8,"! "),e()())}function at(a,r){if(a&1&&(n(0,"div")(1,"li",20)(2,"span"),i(3,"Card Type:"),e(),i(4),e(),n(5,"li",20)(6,"span"),i(7,"Last Four Digits:"),e(),i(8),e(),n(9,"li",20)(10,"span"),i(11,"Expiry Date:"),e(),i(12),e()()),a&2){let t=m(3);o(4),p(" ",t.subscriptionData.payment_information.card_type," "),o(4),p(" ",t.subscriptionData.payment_information.last_four_digits," "),o(4),p(" ",t.subscriptionData.payment_information.expiry_date," ")}}function ot(a,r){if(a&1&&(n(0,"div",12)(1,"table",16)(2,"thead")(3,"tr")(4,"th",17)(5,"h2",8),i(6,"Subscription Details"),e()()()(),n(7,"tbody")(8,"tr")(9,"th",18),i(10,"Plan"),e(),n(11,"td"),i(12),e()(),n(13,"tr")(14,"th",18),i(15,"Signup Date"),e(),n(16,"td"),i(17),f(18,"date"),e()(),n(19,"tr")(20,"th",18),i(21,"Email"),e(),n(22,"td"),i(23),e()(),n(24,"tr")(25,"th",18),i(26,"Status"),e(),n(27,"td"),i(28),e()(),n(29,"tr")(30,"th",18),i(31,"Payment Informmation"),e(),n(32,"td")(33,"ul",19)(34,"li",20)(35,"span"),i(36,"Payment Method:"),e(),i(37),e(),y(38,at,13,3,"div",21),e()()(),n(39,"tr")(40,"th",18),i(41,"Next Payment"),e(),n(42,"td")(43,"ul",19)(44,"li",20)(45,"span"),i(46,"Amount:"),e(),i(47),e(),n(48,"li",20)(49,"span"),i(50,"Currency:"),e(),i(51),e(),n(52,"li",20)(53,"span"),i(54,"Date:"),e(),i(55),f(56,"date"),e()()()()()()()),a&2){let t=m(2);o(12),p(" ",t.plan," "),o(5),u(h(18,9,t.subscriptionData==null?null:t.subscriptionData.signup_date)),o(6),u(t.subscriptionData.user_email),o(5),u(t.subscriptionData.state),o(9),p(" ",t.subscriptionData.payment_information.payment_method," "),o(),b("ngIf",t.subscriptionData.payment_information.payment_method==="card"),o(9),p(" ",t.subscriptionData.next_payment&&t.subscriptionData.next_payment.amount),o(4),p(" ",t.subscriptionData.next_payment&&t.subscriptionData.next_payment.currency," "),o(4),p(" ",h(56,11,t.subscriptionData.next_payment&&t.subscriptionData.next_payment.date))}}function lt(a,r){if(a&1){let t=M();n(0,"ion-grid")(1,"ion-row")(2,"ion-col",0)(3,"ion-card",1)(4,"ion-card-content")(5,"ion-row")(6,"ion-col",2)(7,"div",3)(8,"div",4),I(9,"img",5),e()()(),n(10,"ion-col",6)(11,"ion-item")(12,"ion-label"),i(13,"Full Name"),e(),n(14,"ion-text"),i(15),e()(),n(16,"ion-item")(17,"ion-label"),i(18,"Email"),e(),n(19,"ion-text"),i(20),e()(),n(21,"ion-item")(22,"ion-label"),i(23,"Phone"),e(),n(24,"ion-text"),i(25),e()(),n(26,"ion-item")(27,"button",7),w("click",function(){S(t);let c=m();return P(c.openSubscribeDialog())}),i(28," Manage Subscription "),e()()()()()()(),n(29,"ion-col",0)(30,"h2",8),i(31,"Subscription Billing"),e(),s(32,K,13,4,"ion-card",1),n(33,"div",9)(34,"p",8),i(35," Subscription Status: "),s(36,X,2,0,"span",10),s(37,Z,3,4,"span"),e(),s(38,$,3,0,"p",8),s(39,tt,3,0,"p",8),s(40,it,3,1,"p",8),e(),s(41,nt,9,0,"div",11),s(42,ot,57,13,"div",12),e()()()}if(a&2){let t=m();o(9),b("src",t.profileData==null?null:t.profileData.photoURL,D),o(6),u(t.profileData.displayName),o(5),u(t.profileData.email),o(5),u(t.profileData.phone),o(7),d(!(t.subscriptionCancellationData==null||t.subscriptionCancellationData.data==null)&&t.subscriptionCancellationData.data.cancellation_effective_date?32:-1),o(4),d(t.status==="active"?36:-1),o(),d(t.subscriptionCancellationData?37:-1),o(),d(t.status!=="active"&&!t.isPaused?38:-1),o(),d(t.status!=="active"&&t.isPaused?39:-1),o(),d(t.status==="active"||t.isPaused?40:-1),o(),d(t.status!=="active"&&!t.isPaused?41:-1),o(),d((t.status==="active"||t.isPaused)&&t.subscriptionData?42:-1)}}var bt=(()=>{let r=class r{constructor(l,c,_,J){this.router=l,this.authService=c,this.apiService=_,this.modalCtrl=J,this.http=v(T),this.plan="",this.status=""}ngOnInit(){switch(this.profileData=this.authService.userObjData,console.log(this.profileData,"this.profileData "),this.status=this.authService.customer().status,this.getSubscriptionData(),this.getSubscriptionCancelData(),this.authService.customer().subType){case"month":this.plan="Monthly";break;case"annual":this.plan="Annual";break;default:break}}get isPaused(){var l;return((l=this.authService.customer())==null?void 0:l.paddle_status)=="paused"}get isPastDue(){var l;return((l=this.authService.customer())==null?void 0:l.paddle_status)=="past_due"}getSubscriptionData(){return g(this,null,function*(){if(console.log(this.authService.customer()),this.authService.customer().subscription_id){let l;this.authService.customer()._isPaddleBillingV2?l="https://us-central1-ifyoucanmove-dev.cloudfunctions.net/paddleUserGetBySubscriptionIdV2":l="https://us-central1-ifyoucanmove-dev.cloudfunctions.net/paddleUserGetBySubscriptionId",this.http.post(l,{subscription_id:this.authService.customer().subscription_id}).subscribe({next:c=>{this.subscriptionData=c.response[0],console.log(this.subscriptionData,"subscriptionData")},error:c=>{}})}})}getSubscriptionCancelData(){this.apiService.getSubscriptionCancellationData().subscribe(l=>{console.log(l,"re"),l.length>0?this.subscriptionCancellationData=l[0]:this.subscriptionCancellationData=null})}openManage(){window.open("https://ifyoucanmove.com/update-plan-select?isFromMobile=true","_blank")}openSubscribeDialog(){return g(this,null,function*(){let l=yield this.modalCtrl.create({component:q,componentProps:{title:"Confirm",message:"Scan QR code to manage your subscriptions.",type:"manage"},cssClass:"confirm-modal"});yield l.present();let{data:c}=yield l.onWillDismiss()})}};r.\u0275fac=function(c){return new(c||r)(x(U),x(W),x(Q),x(H))},r.\u0275cmp=E({type:r,selectors:[["app-update-profile"]],decls:1,vars:1,consts:[["size","8",1,"mx-auto"],[1,"custom-card"],["size","4"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],[1,"profile-img"],["onerror","this.onerror=null;this.src='assets/images/profile.jpg';",1,"img-profile",3,"src"],["size","6"],[1,"btn","btn-primary-custom",3,"click"],[1,"text-white"],[1,"mt-5"],[1,"tag"],[1,"d-flex","justify-content-center"],[1,"row","justify-content-center"],[2,"height","auto"],[1,"cancellation_effective_date"],[1,"text-linear-gradient"],[1,"table","borderless"],["scope","col"],["scope","row"],[1,"list-group"],[1,"list-group-item"],[4,"ngIf"]],template:function(c,_){c&1&&s(0,lt,43,12,"ion-grid"),c&2&&d(_.profileData?0:-1)},dependencies:[Y,R,V,F,j,B,A,N,z,L,G,O,k],styles:["ion-item[_ngcontent-%COMP%]{--background: var(--background-secondary);color:#fff}.profile-img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;overflow:hidden}.profile-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover}.tag[_ngcontent-%COMP%]{background-color:#06ae06;color:#fff;padding:5px 10px;border-radius:5px;font-size:12px}.text-linear-gradient[_ngcontent-%COMP%]{background:-webkit-linear-gradient(right #00c0cb,#00e79d);background:-o-linear-gradient(right,#00c0cb,#00e79d);background:-moz-linear-gradient(right,#00c0cb,#00e79d);background:linear-gradient(to right,#00c0cb,#00e79d);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border-collapse:collapse;border:none;font-weight:500}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border-collapse:collapse;border:none}.list-group[_ngcontent-%COMP%], .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{background-color:transparent;color:#fff}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}"]});let a=r;return a})();export{bt as UpdateProfilePage};
