import{a as H}from"./chunk-3OT5IHQ2.js";import{a as A}from"./chunk-QIL4TVBT.js";import{O as j}from"./chunk-GK747CHS.js";import"./chunk-ZFIWIRC4.js";import{Bb as y,Ca as p,Da as m,Fc as w,Ia as h,Ja as r,Ka as o,Kc as E,La as u,Mc as P,Ob as F,Oc as R,Pa as D,Qa as x,Ra as l,Rb as T,Sc as k,Tc as V,U as f,V as _,ab as d,bb as C,ed as M,ja as S,na as s,qa as g,sa as b,wa as L}from"./chunk-HGIDUMG6.js";import"./chunk-ADY6KXU2.js";import"./chunk-JFHB5KU2.js";import"./chunk-D2WB2TDK.js";import"./chunk-XWSGAIXU.js";import"./chunk-I5IPTR26.js";import"./chunk-4XLORUIW.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-O4PCMGUI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-DDPKQVXB.js";function O(t,c){t&1&&(r(0,"div"),u(1,"ion-skeleton-text",8),o())}function B(t,c){if(t&1){let n=D();r(0,"ion-img",9),x("ionImgDidLoad",function(){f(n);let i=l();return _(i.imageLoaded=!0)}),o()}if(t&2){let n=l();h("src",n.recipeData==null?null:n.recipeData.image)}}function N(t,c){if(t&1){let n=D();r(0,"button",10),x("click",function(){f(n);let i=l();return _(i.addTofav())}),u(1,"ion-icon",11),r(2,"span"),d(3,"Add to Favorites"),o()()}}function G(t,c){if(t&1){let n=D();r(0,"button",10),x("click",function(){f(n);let i=l();return _(i.removeFromFavList())}),u(1,"ion-icon",12),r(2,"span"),d(3,"Added to Favorites"),o()()}}function q(t,c){if(t&1&&(r(0,"div",6)(1,"h5",13),d(2,"Description:"),o(),r(3,"p",13),d(4),o()()),t&2){let n=l();s(4),C(n.recipeData==null?null:n.recipeData.description)}}function J(t,c){if(t&1&&(r(0,"ion-col",7)(1,"h5",13),d(2,"Ingredients:"),o(),u(3,"p",14),o()),t&2){let n=l();s(3),h("innerHTML",n.recipeData==null?null:n.recipeData.ingredients,S)}}function K(t,c){if(t&1&&(r(0,"ion-col",7)(1,"h5",13),d(2,"Directions:"),o(),u(3,"p",14),o()),t&2){let n=l();s(3),h("innerHTML",n.recipeData==null?null:n.recipeData.directions,S)}}var ie=(()=>{let c=class c{constructor(e,i,a,z){this.route=e,this.apiService=i,this.router=a,this.authService=z,this.favList=[],this.imageLoaded=!0;let v=this.router.getCurrentNavigation();if(v!=null&&v.extras.state){let I=v.extras.state;this.recipeData=I.data,console.log(I.data,"ss")}}ngOnInit(){this.route.paramMap.subscribe(e=>{this.id=e.params.id,console.log(this.id,"id"),this.recipeData?this.getFavList():this.apiService.getPostById(this.id).subscribe(i=>{console.log(i,"getPostById"),this.recipeData=i,this.getFavList()})})}setFocus(){setTimeout(()=>{let e=document.getElementById("favbtn");e&&e.focus()},1e3)}getFavList(){this.apiService.getFavorites(this.authService.userObjData.email).subscribe(e=>{console.log(e,"favlist"),this.favList=e.favorites;let i=this.favList.find(a=>a.postId===this.recipeData.id);i&&(this.favDocid=i.docid),this.setFocus()})}addTofav(){let e={id:this.recipeData.id,postId:this.recipeData.id,email:this.authService.userObjData.email,title:this.recipeData.title,image:this.recipeData.image,type:this.recipeData.type,media:this.recipeData.media,description:this.recipeData.description,duration:this.recipeData.duration,categories:this.recipeData.categories,categoryArray:this.recipeData.categoryArray,ingredients:this.recipeData.ingredients};this.apiService.addFavorites(e).subscribe(i=>{console.log(i),this.getFavList()})}removeFromFavList(){console.log(this.favDocid),this.apiService.deleteFavorites(this.favDocid).subscribe(e=>{this.getFavList()})}checkFavorites(){let e=this.favList;if(e)return e&&e.filter(i=>i.postId===this.recipeData.id).length}};c.\u0275fac=function(i){return new(i||c)(g(F),g(H),g(T),g(j))},c.\u0275cmp=b({type:c,selectors:[["app-single-recipe"]],decls:15,vars:8,consts:[["size","6"],[1,"m-0"],[4,"ngIf"],[3,"src"],[1,"text-white","text-start","mt-0"],["tabindex","0","id","favbtn",1,"btn-icon-primary"],[1,"mt-3"],["size","12"],["animated","",2,"width","100%","height","115px"],[3,"ionImgDidLoad","src"],["tabindex","0","id","favbtn",1,"btn-icon-primary",3,"click"],["name","heart-outline"],["name","heart"],[1,"text-white"],[1,"text-white",3,"innerHTML"]],template:function(i,a){i&1&&(r(0,"ion-grid")(1,"ion-row")(2,"ion-col",0)(3,"ion-card",1),L(4,O,2,0,"div",2),p(5,B,1,1,"ion-img",3),o()(),r(6,"ion-col",0)(7,"h1",4),d(8),o(),p(9,N,4,0,"button",5),p(10,G,4,0,"button",5),p(11,q,5,1,"div",6),o()(),r(12,"ion-row"),p(13,J,4,1,"ion-col",7),p(14,K,4,1,"ion-col",7),o()()),i&2&&(s(4),h("ngIf",!a.imageLoaded),s(),m(a.recipeData!=null&&a.recipeData.image?5:-1),s(3),C(a.recipeData==null?null:a.recipeData.title),s(),m(a.checkFavorites()?-1:9),s(),m(a.checkFavorites()?10:-1),s(),m(a.recipeData!=null&&a.recipeData.description?11:-1),s(2),m(a.recipeData!=null&&a.recipeData.ingredients?13:-1),s(),m(a.recipeData!=null&&a.recipeData.directions?14:-1))},dependencies:[A,E,P,k,w,M,R,y,V],styles:["ion-card[_ngcontent-%COMP%]{background:var(--background-secondary);min-height:170px}"]});let t=c;return t})();export{ie as SingleRecipePage};
