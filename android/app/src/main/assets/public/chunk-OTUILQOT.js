import{a as B}from"./chunk-QIL4TVBT.js";import{Fb as E,Ia as f,Ja as s,Ka as l,La as C,Pa as w,Qa as c,U as d,V as m,Va as u,Wa as p,Xa as h,Ya as O,Za as T,ab as g,bb as P,db as b,ed as V,ka as y,ma as _,na as r,sa as M,sb as k}from"./chunk-HGIDUMG6.js";var F=["videoElement"],z=["progressBar"],S=["controlsContainer"],U=(()=>{let a=class a{constructor(){this.video=k({}),this.isPlaying=!1,this.currentTime=0,this.duration=0,this.volume=1,this.isMuted=!1,this.showControls=!0,this.isFullscreen=!1}ngOnInit(){setTimeout(()=>{this.initializeVideo()},3e3)}ngOnDestroy(){this.clearControlsTimeout()}handleKeyboardEvent(e){switch(e.key){case" ":case"k":this.togglePlay();break;case"f":this.toggleFullscreen();break;case"m":this.toggleMute();break;case"ArrowRight":this.seekForward();break;case"ArrowLeft":this.seekBackward();break;case"ArrowUp":this.increaseVolume();break;case"ArrowDown":this.decreaseVolume();break}}initializeVideo(){console.log(this.videoElement.nativeElement,"initializeVideo");let e=this.videoElement.nativeElement;this.isPlaying||(e.play(),this.isPlaying=!this.isPlaying),e.addEventListener("loadedmetadata",()=>{this.duration=e.duration}),e.addEventListener("timeupdate",()=>{this.currentTime=e.currentTime,this.updateProgressBar()}),e.addEventListener("ended",()=>{this.isPlaying=!1})}togglePlay(){let e=this.videoElement.nativeElement;this.isPlaying?e.pause():e.play(),this.isPlaying=!this.isPlaying,this.showControlsTemporarily()}toggleMute(){let e=this.videoElement.nativeElement;this.isMuted=!this.isMuted,e.muted=this.isMuted,this.showControlsTemporarily()}toggleFullscreen(){this.isFullscreen?document.exitFullscreen&&document.exitFullscreen():this.videoElement.nativeElement.requestFullscreen&&this.videoElement.nativeElement.requestFullscreen(),this.isFullscreen=!this.isFullscreen,this.showControlsTemporarily()}seekForward(){let e=this.videoElement.nativeElement;e.currentTime=Math.min(e.currentTime+10,e.duration),this.showControlsTemporarily()}seekBackward(){let e=this.videoElement.nativeElement;e.currentTime=Math.max(e.currentTime-10,0),this.showControlsTemporarily()}increaseVolume(){this.volume=Math.min(this.volume+.1,1),this.updateVolume(),this.showControlsTemporarily()}decreaseVolume(){this.volume=Math.max(this.volume-.1,0),this.updateVolume(),this.showControlsTemporarily()}updateVolume(){let e=this.videoElement.nativeElement;e.volume=this.volume,this.isMuted=this.volume===0,e.muted=this.isMuted}onProgressBarClick(e){let t=this.progressBar.nativeElement.getBoundingClientRect(),i=(e.clientX-t.left)/t.width,o=this.videoElement.nativeElement;o.currentTime=i*o.duration,this.showControlsTemporarily()}updateProgressBar(){let e=this.progressBar.nativeElement,n=this.currentTime/this.duration*100;e.style.width=`${n}%`}formatTime(e){let n=Math.floor(e/60);return e=Math.floor(e%60),`${n}:${e.toString().padStart(2,"0")}`}showControlsTemporarily(){this.showControls=!0,this.clearControlsTimeout(),this.controlsTimeout=setTimeout(()=>{this.isPlaying&&(this.showControls=!1)},3e3)}clearControlsTimeout(){this.controlsTimeout&&clearTimeout(this.controlsTimeout)}onMouseMove(){this.showControlsTemporarily()}ngAfterViewInit(){setTimeout(()=>{let e=document.getElementById("play-btn-player");e&&e.focus()},2e3)}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=M({type:a,selectors:[["app-video-player"]],viewQuery:function(n,t){if(n&1&&(u(F,5),u(z,5),u(S,5)),n&2){let i;p(i=h())&&(t.videoElement=i.first),p(i=h())&&(t.progressBar=i.first),p(i=h())&&(t.controlsContainer=i.first)}},hostBindings:function(n,t){n&1&&c("keydown",function(o){return t.handleKeyboardEvent(o)},_)},inputs:{video:[1,"video"]},decls:19,vars:11,consts:[["videoElement",""],["progressBar",""],["controlsContainer",""],[1,"video-player-container",3,"mousemove"],[1,"video-element",3,"click","src","poster"],[1,"controls-overlay"],[1,"progress-container",3,"click"],[1,"progress-bar"],[1,"controls-container"],[1,"main-controls"],["id","play-btn-player",1,"control-button",3,"click"],["size","large",3,"name"],[1,"time-display"],[1,"video-info"]],template:function(n,t){if(n&1){let i=w();s(0,"div",3),c("mousemove",function(){return d(i),m(t.onMouseMove())}),s(1,"video",4,0),c("click",function(){return d(i),m(t.togglePlay())}),l(),s(3,"div",5)(4,"div",6),c("click",function(x){return d(i),m(t.onProgressBarClick(x))}),C(5,"div",7,1),l(),s(7,"div",8,2)(9,"div",9)(10,"button",10),c("click",function(){return d(i),m(t.togglePlay())}),C(11,"ion-icon",11),l(),s(12,"div",12),g(13),l()(),s(14,"div",13)(15,"h3"),g(16),l(),s(17,"p"),g(18),l()()()()()}n&2&&(r(),f("src",t.video.video,y)("poster",t.video.image,y),r(2),T("hidden",!t.showControls),r(2),O("width",t.currentTime,"%"),r(6),f("name",t.isPlaying?"pause-circle":"play-circle"),r(2),b(" ",t.formatTime(t.currentTime)," / ",t.formatTime(t.duration)," "),r(3),P(t.video==null?null:t.video.title),r(2),P(t.video==null?null:t.video.description))},dependencies:[E,B,V],styles:[".video-player-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100vh;background:#000;overflow:hidden}.video-player-container[_ngcontent-%COMP%]   .video-element[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.video-player-container[_ngcontent-%COMP%]   .controls-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent,#000000b3);padding:20px;transition:opacity .3s ease}.video-player-container[_ngcontent-%COMP%]   .controls-overlay.hidden[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.video-player-container[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{position:absolute;top:-10px;left:0;right:0;height:4px;background:#ffffff4d;cursor:pointer;transition:height .2s ease}.video-player-container[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]:hover{height:8px}.video-player-container[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background:var(--accent-primary);transition:width .1s linear}.video-player-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.video-player-container[_ngcontent-%COMP%]   .main-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.video-player-container[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:8px;border-radius:50%;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center}.video-player-container[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:hover{background:#ffffff1a}.video-player-container[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;color:#fff}.video-player-container[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{color:#fff;font-size:14px;min-width:100px}.video-player-container[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.video-player-container[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]{width:100px;height:4px;background:#ffffff4d;border-radius:2px;cursor:pointer;position:relative}.video-player-container[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]   .volume-progress[_ngcontent-%COMP%]{height:100%;background:var(--accent-primary);border-radius:2px}.video-player-container[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]{color:#fff;margin-top:10px}.video-player-container[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin:0 0 5px}.video-player-container[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0;opacity:.8}"]});let v=a;return v})();export{U as a};
