import{a as $e}from"./chunk-3OT5IHQ2.js";import{a as Ke}from"./chunk-QIL4TVBT.js";import{a as et}from"./chunk-DPRXCCNP.js";import"./chunk-GK747CHS.js";import"./chunk-ZFIWIRC4.js";import{Ba as We,Bb as Ve,Dc as He,Ia as M,Ja as f,Jb as Ue,Ka as h,Kc as Qe,L as Ae,La as ae,Mc as qe,O as ve,Ob as je,Oc as Ye,Pa as Z,Qa as J,Ra as E,Sc as Xe,U as Y,V as X,Va as _e,Wa as ye,Xa as be,a as Be,ab as k,ad as Ze,b as Re,bb as xe,cb as se,db as Ne,ed as Je,ka as Ge,n as Le,na as g,p as ze,qa as oe,sa as Fe,wa as N}from"./chunk-HGIDUMG6.js";import"./chunk-ADY6KXU2.js";import"./chunk-JFHB5KU2.js";import"./chunk-D2WB2TDK.js";import"./chunk-XWSGAIXU.js";import"./chunk-I5IPTR26.js";import"./chunk-4XLORUIW.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-O4PCMGUI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{f as ft,g as mt,m as ee}from"./chunk-DDPKQVXB.js";var it=ft((Ce,tt)=>{"use strict";(function(o,l){typeof define=="function"&&define.amd?define([],l):typeof Ce=="object"?tt.exports=l():o.SuperGif=l()})(Ce,function(){var o=function(r){return r.reduce(function(e,v){return e*2+v},0)},l=function(r){for(var e=[],v=7;v>=0;v--)e.push(!!(r&1<<v));return e},s=function(r){this.data=r,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return r instanceof Uint8Array?r[this.pos++]:r.charCodeAt(this.pos++)&255},this.readBytes=function(e){for(var v=[],I=0;I<e;I++)v.push(this.readByte());return v},this.read=function(e){for(var v="",I=0;I<e;I++)v+=String.fromCharCode(this.readByte());return v},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},a=function(r,e){for(var v=0,I=function(y){for(var S=0,O=0;O<y;O++)e.charCodeAt(v>>3)&1<<(v&7)&&(S|=1<<O),v++;return S},_=[],F=1<<r,V=F+1,G=r+1,w=[],n=function(){w=[],G=r+1;for(var y=0;y<F;y++)w[y]=[y];w[F]=[],w[V]=null},p,C;;){if(C=p,p=I(G),p===F){n();continue}if(p===V)break;if(p<w.length)C!==F&&w.push(w[C].concat(w[p][0]));else{if(p!==w.length)throw new Error("Invalid LZW code.");w.push(w[C].concat(w[C][0]))}_.push.apply(_,w[p]),w.length===1<<G&&G<12&&G++}return _},t=function(r,e){e||(e={});var v=function(n){for(var p=[],C=0;C<n;C++)p.push(r.readBytes(3));return p},I=function(){var n,p;p="";do n=r.readByte(),p+=r.read(n);while(n!==0);return p},_=function(){var n={};if(n.sig=r.read(3),n.ver=r.read(3),n.sig!=="GIF")throw new Error("Not a GIF file.");n.width=r.readUnsigned(),n.height=r.readUnsigned();var p=l(r.readByte());n.gctFlag=p.shift(),n.colorRes=o(p.splice(0,3)),n.sorted=p.shift(),n.gctSize=o(p.splice(0,3)),n.bgColor=r.readByte(),n.pixelAspectRatio=r.readByte(),n.gctFlag&&(n.gct=v(1<<n.gctSize+1)),e.hdr&&e.hdr(n)},F=function(n){var p=function(u){var A=r.readByte(),b=l(r.readByte());u.reserved=b.splice(0,3),u.disposalMethod=o(b.splice(0,3)),u.userInput=b.shift(),u.transparencyGiven=b.shift(),u.delayTime=r.readUnsigned(),u.transparencyIndex=r.readByte(),u.terminator=r.readByte(),e.gce&&e.gce(u)},C=function(u){u.comment=I(),e.com&&e.com(u)},y=function(u){var A=r.readByte();u.ptHeader=r.readBytes(12),u.ptData=I(),e.pte&&e.pte(u)},S=function(u){var A=function(m){var K=r.readByte();m.unknown=r.readByte(),m.iterations=r.readUnsigned(),m.terminator=r.readByte(),e.app&&e.app.NETSCAPE&&e.app.NETSCAPE(m)},b=function(m){m.appData=I(),e.app&&e.app[m.identifier]&&e.app[m.identifier](m)},U=r.readByte();switch(u.identifier=r.read(8),u.authCode=r.read(3),u.identifier){case"NETSCAPE":A(u);break;default:b(u);break}},O=function(u){u.data=I(),e.unknown&&e.unknown(u)};switch(n.label=r.readByte(),n.label){case 249:n.extType="gce",p(n);break;case 254:n.extType="com",C(n);break;case 1:n.extType="pte",y(n);break;case 255:n.extType="app",S(n);break;default:n.extType="unknown",O(n);break}},V=function(n){var p=function(S,O){for(var u=new Array(S.length),A=S.length/O,b=function(ie,le){var de=S.slice(le*O,(le+1)*O);u.splice.apply(u,[ie*O,O].concat(de))},U=[0,4,2,1],m=[8,8,4,2],K=0,$=0;$<4;$++)for(var te=U[$];te<A;te+=m[$])b(te,K),K++;return u};n.leftPos=r.readUnsigned(),n.topPos=r.readUnsigned(),n.width=r.readUnsigned(),n.height=r.readUnsigned();var C=l(r.readByte());n.lctFlag=C.shift(),n.interlaced=C.shift(),n.sorted=C.shift(),n.reserved=C.splice(0,2),n.lctSize=o(C.splice(0,3)),n.lctFlag&&(n.lct=v(1<<n.lctSize+1)),n.lzwMinCodeSize=r.readByte();var y=I();n.pixels=a(n.lzwMinCodeSize,y),n.interlaced&&(n.pixels=p(n.pixels,n.width)),e.img&&e.img(n)},G=function(){var n={};switch(n.sentinel=r.readByte(),String.fromCharCode(n.sentinel)){case"!":n.type="ext",F(n);break;case",":n.type="img",V(n);break;case";":n.type="eof",e.eof&&e.eof(n);break;default:throw new Error("Unknown block: 0x"+n.sentinel.toString(16))}n.type!=="eof"&&setTimeout(G,0)},w=function(){_(),setTimeout(G,0)};w()},c=function(r){var e={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var v in r)e[v]=r[v];e.vp_w&&e.vp_h&&(e.is_vp=!0);var I,_,F=null,V=!1,G=null,w=null,n=null,p=null,C=null,y=null,S=null,O=!0,u=!0,A=!1,b=[],U=[],m=e.gif;typeof e.auto_play>"u"&&(e.auto_play=!m.getAttribute("rel:auto_play")||m.getAttribute("rel:auto_play")=="1");var K=e.hasOwnProperty("on_end")?e.on_end:null,$=e.hasOwnProperty("loop_delay")?e.loop_delay:0,te=e.hasOwnProperty("loop_mode")?e.loop_mode:"auto",ie=e.hasOwnProperty("draw_while_loading")?e.draw_while_loading:!0,le=ie?e.hasOwnProperty("show_progress_bar")?e.show_progress_bar:!0:!1,de=e.hasOwnProperty("progressbar_height")?e.progressbar_height:25,ot=e.hasOwnProperty("progressbar_background_color")?e.progressbar_background_color:"rgba(255,255,255,0.4)",at=e.hasOwnProperty("progressbar_foreground_color")?e.progressbar_foreground_color:"rgba(255,0,22,.8)",we=function(){G=null,w=null,C=n,n=null,y=null},Pe=function(){try{t(I,ut)}catch{ue("parse")}},Lt=function(i){q.innerHTML=i,q.style.visibility="visible"},Ie=function(i,d){L.width=i*T(),L.height=d*T(),q.style.minWidth=i*T()+"px",W.width=i,W.height=d,W.style.width=i+"px",W.style.height=d+"px",W.getContext("2d").setTransform(1,0,0,1,0,0)},st=function(i,d){if(!U[i]){U[i]=d;return}typeof d.x<"u"&&(U[i].x=d.x),typeof d.y<"u"&&(U[i].y=d.y)},Se=function(i,d,P){if(P&&le){var x=de,B,z,j,H;if(e.is_vp){if(A?(j=(e.vp_t+e.vp_h-x)/T(),x=x/T(),B=e.vp_l/T(),z=B+i/d*(e.vp_w/T()),H=L.width/T()):(j=e.vp_t+e.vp_h-x,x=x,B=e.vp_l,z=B+i/d*e.vp_w,H=L.width),0)if(A)var fe,me,R,he;else var fe,me,R,he}else j=(L.height-x)/(A?T():1),z=i/d*L.width/(A?T():1),H=L.width/(A?T():1),x/=A?T():1;D.fillStyle=ot,D.fillRect(z,j,H-z,x),D.fillStyle=at,D.fillRect(0,j,z,x)}},ue=function(i){var d=function(){D.fillStyle="black",D.fillRect(0,0,e.c_w?e.c_w:_.width,e.c_h?e.c_h:_.height),D.strokeStyle="red",D.lineWidth=3,D.moveTo(0,0),D.lineTo(e.c_w?e.c_w:_.width,e.c_h?e.c_h:_.height),D.moveTo(0,e.c_h?e.c_h:_.height),D.lineTo(e.c_w?e.c_w:_.width,0),D.stroke()};F=i,_={width:m.width,height:m.height},b=[],d()},lt=function(i){_=i,Ie(_.width,_.height)},ct=function(i){Te(),we(),G=i.transparencyGiven?i.transparencyIndex:null,w=i.delayTime,n=i.disposalMethod},Te=function(){y&&(b.push({data:y.getImageData(0,0,_.width,_.height),delay:w}),U.push({x:0,y:0}))},dt=function(i){y||(y=W.getContext("2d"));var d=b.length,P=i.lctFlag?i.lct:_.gct;d>0&&(C===3?p!==null?y.putImageData(b[p].data,0,0):y.clearRect(S.leftPos,S.topPos,S.width,S.height):p=d-1,C===2&&y.clearRect(S.leftPos,S.topPos,S.width,S.height));var x=y.getImageData(i.leftPos,i.topPos,i.width,i.height);i.pixels.forEach(function(B,z){B!==G&&(x.data[z*4+0]=P[B][0],x.data[z*4+1]=P[B][1],x.data[z*4+2]=P[B][2],x.data[z*4+3]=255)}),y.putImageData(x,i.leftPos,i.topPos),A||(D.scale(T(),T()),A=!0),ie&&(D.drawImage(W,0,0),ie=e.auto_play),S=i},Q=function(){var i=-1,d=0,P=!1,x=!1,B=function(){var R=u?1:-1;return(i+R+b.length)%b.length},z=function(R){i=i+R,H()},j=function(){var R=!1,he=function(){K!==null&&K(m),d++,te!==!1||d<0?ge():(R=!1,O=!1)},ge=function(){if(R=O,!!R){z(1);var re=b[i].delay*10;re||(re=100);var pt=B();pt===0?(re+=$,setTimeout(he,re)):setTimeout(ge,re)}};return function(){R||setTimeout(ge,0)}}(),H=function(){var R;i=parseInt(i,10),i>b.length-1&&(i=0),i<0&&(i=0),R=U[i],W.getContext("2d").putImageData(b[i].data,R.x,R.y),D.globalCompositeOperation="copy",D.drawImage(W,0,0)},fe=function(){O=!0,j()},me=function(){O=!1};return{init:function(){F||(e.c_w&&e.c_h||D.scale(T(),T()),e.auto_play?j():(i=0,H()))},step:j,play:fe,pause:me,playing:O,move_relative:z,current_frame:function(){return i},length:function(){return b.length},move_to:function(R){i=R,H()}}}(),De=function(i){Se(I.pos,I.data.length,i)},Me=function(){},ne=function(i,d){return function(P){i(P),De(d)}},ut={hdr:ne(lt),gce:ne(ct),com:ne(Me),app:{NETSCAPE:ne(Me)},img:ne(dt,!0),eof:function(i){Te(),De(!1),e.c_w&&e.c_h||(L.width=_.width*T(),L.height=_.height*T()),Q.init(),V=!1,ce&&ce(m)}},Ee=function(){var i=m.parentNode,d=document.createElement("div");L=document.createElement("canvas"),D=L.getContext("2d"),q=document.createElement("div"),W=document.createElement("canvas"),d.width=L.width=m.width,d.height=L.height=m.height,q.style.minWidth=m.width+"px",d.className="jsgif",q.className="jsgif_toolbar",d.appendChild(L),d.appendChild(q),i.insertBefore(d,m),i.removeChild(m),e.c_w&&e.c_h&&Ie(e.c_w,e.c_h),pe=!0},T=function(){var i;return e.max_width&&_&&_.width>e.max_width?i=e.max_width/_.width:i=1,i},L,D,q,W,pe=!1,ce=!1,Oe=function(i){return V?!1:(i?ce=i:ce=!1,V=!0,b=[],we(),p=null,C=null,y=null,S=null,!0)},ke=function(){return b.reduce(function(i,d){return i+d.delay},0)};return{play:Q.play,pause:Q.pause,move_relative:Q.move_relative,move_to:Q.move_to,get_playing:function(){return O},get_canvas:function(){return L},get_canvas_scale:function(){return T()},get_loading:function(){return V},get_auto_play:function(){return e.auto_play},get_length:function(){return Q.length()},get_frames:function(){return b},get_duration:function(){return ke()},get_duration_ms:function(){return ke()*10},get_current_frame:function(){return Q.current_frame()},load_url:function(i,d){if(Oe(d)){var P=new XMLHttpRequest;P.open("GET",i,!0),"overrideMimeType"in P?P.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in P?P.responseType="arraybuffer":P.setRequestHeader("Accept-Charset","x-user-defined"),P.onloadstart=function(){pe||Ee()},P.onload=function(x){this.status!=200&&ue("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var B=this.response;B.toString().indexOf("ArrayBuffer")>0&&(B=new Uint8Array(B)),I=new s(B),setTimeout(Pe,0)},P.onprogress=function(x){x.lengthComputable&&Se(x.loaded,x.total,!0)},P.onerror=function(){ue("xhr")},P.send()}},load:function(i){this.load_url(m.getAttribute("rel:animated_src")||m.src,i)},load_raw:function(i,d){Oe(d)&&(pe||Ee(),I=new s(i),setTimeout(Pe,0))},set_frame_offset:st}};return c})});var rt=mt(it());var nt=(()=>{let l=class l{constructor(a,t){this.httpClient=a,this.dbService=t}arrayBufferToBase64(a){let t="",c=new Uint8Array(a),r=c.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(c[e]);return window.btoa(t)}getImageName(a){let t=a.split("/");return t[t.length-1]}getGif(a){let t=this.getImageName(a);console.log(t,this.imagesData,"fd");let c=this.imagesData&&this.imagesData.find(r=>r.name==t);return c&&c.base64}saveGif(a){return Le(new Re(t=>{let c=this.getImageName(a);if(this.imagesData&&this.imagesData.find(r=>r.name==c)){t.next(""),t.complete();return}this.httpClient.get("https://us-central1-ifyoucanmove-dev.cloudfunctions.net/getGif?url="+a,{responseType:"arraybuffer"}).pipe(ze(r=>this.arrayBufferToBase64(r))).subscribe(r=>{var e="data:image/gif;base64,"+r;this.dbService.add("gifImages",{name:c,base64:e}).subscribe(v=>{t.next(v),t.complete()},v=>{t.error({error:!0})})},r=>{t.error({error:!0}),t.complete()})}))}getGifs(){return ee(this,null,function*(){return new Promise((a,t)=>{this.getGifsUnsub&&this.getGifsUnsub.unsubscribe(),this.getGifsUnsub=this.dbService.getAll("gifImages").subscribe(c=>{console.log(c,"gifImages"),this.imagesData=c,a(null)},c=>{t(c)})})})}};l.\u0275fac=function(t){return new(t||l)(ve(Ue),ve(et))},l.\u0275prov=Ae({token:l,factory:l.\u0275fac,providedIn:"root"});let o=l;return o})();var vt=["bellAudio"],_t=["buzzerAudio"];function yt(o,l){o&1&&(f(0,"div",12)(1,"h1",13),k(2,"Preparing your byo combo"),h()())}function bt(o,l){if(o&1&&(f(0,"div",14)(1,"h1",13),k(2),h(),f(3,"h1",15),k(4),h()()),o&2){let s=E(2);g(2),xe(s.restingText),g(2),xe(s.timeLeft)}}function xt(o,l){if(o&1&&(f(0,"div",9),N(1,yt,3,0,"div",10)(2,bt,5,2,"div",11),h()),o&2){let s=E();g(),M("ngIf",s.isComboDownloading),g(),M("ngIf",s.isResting)}}function Ct(o,l){o&1&&(f(0,"span"),k(1,"Complete"),h())}function wt(o,l){if(o&1&&(f(0,"span"),k(1),h()),o&2){let s=E(4);g(),se("(",s.getWatchCount(),")")}}function Pt(o,l){if(o&1&&(f(0,"div",25),ae(1,"ion-icon",26),f(2,"span"),k(3,"Completed "),N(4,wt,2,1,"span",23),h()()),o&2){let s=E(3);g(4),M("ngIf",s.getWatchCount()>1)}}function It(o,l){if(o&1){let s=Z();f(0,"ion-button",22),J("click",function(){Y(s);let t=E(2);return X(t.onMarkCompleteClicked())}),N(1,Ct,2,0,"span",23)(2,Pt,5,1,"div",24),h()}if(o&2){let s=E(2);g(),M("ngIf",!s.isCompleted),g(),M("ngIf",s.isCompleted)}}function St(o,l){if(o&1){let s=Z();f(0,"ion-icon",27),J("click",function(){Y(s);let t=E(2);return X(t.openMoodList())}),h()}}function Tt(o,l){if(o&1){let s=Z();f(0,"div",9)(1,"div",16)(2,"h1",13),k(3,"Combo is ready to play"),h(),f(4,"ion-button",17),J("click",function(){Y(s);let t=E();return X(t.playComboFromScratch())}),k(5,"Play Combo"),h()(),f(6,"div",18),N(7,It,3,2,"ion-button",19),f(8,"div",20),N(9,St,1,0,"ion-icon",21),h()()()}if(o&2){let s=E();g(7),M("ngIf",s.comboDetails.durationMinutes),g(2),M("ngIf",s.checkMoodIconVisible())}}function Dt(o,l){if(o&1){let s=Z();f(0,"div",9)(1,"div",16)(2,"h1",13),k(3,"Combo is paused"),h(),f(4,"ion-button",28),J("click",function(){Y(s);let t=E();return X(t.playCombo())}),k(5,"Play "),h()()()}}function Mt(o,l){if(o&1&&(f(0,"h6",37),k(1),h()),o&2){let s=E(2);g(),Ne(" Combo reps ",s.comboLeft+1," of ",s.comboDetails.repeatCount||1," ")}}function Et(o,l){if(o&1&&(f(0,"h6",38),k(1),h()),o&2){let s=E(2);g(),se(" Time Left : ",s.timeLeft," ")}}function Ot(o,l){if(o&1&&(f(0,"h6",38),k(1),h()),o&2){let s=E(2);g(),se(" Reps Left : ",s.timeLeft," ")}}function kt(o,l){if(o&1&&ae(0,"ion-img",39),o&2){let s=E(2);M("src",s.imageSrc)}}function Bt(o,l){if(o&1){let s=Z();f(0,"div")(1,"img",40,2),J("load",function(){Y(s);let t=E(2);return t.gifLoading=!0,X(t.onImageLoad())}),h()()}if(o&2){let s=E(2);g(),M("hidden",!s.gifLoading)("src",s.imageSrc,Ge),We("animated_src",s.imageSrc,null,"rel")}}function Rt(o,l){if(o&1){let s=Z();f(0,"div",29)(1,"div",30),N(2,Mt,2,2,"h6",31),h(),f(3,"div",32)(4,"h5",33),k(5),h(),f(6,"div",25),N(7,Et,2,1,"h6",34)(8,Ot,2,1,"h6",34),f(9,"button",35),J("click",function(){Y(s);let t=E();return X(t.pauseCombo())}),f(10,"span"),k(11,"Pause"),h()()()(),N(12,kt,1,1,"ion-img",36)(13,Bt,3,3,"div",23),h()}if(o&2){let s=E();g(2),M("ngIf",s.comboDetails.isRepeating),g(3),se(" ",s.combo.title?s.combo.title:s.combo.postDetails.title," "),g(2),M("ngIf",s.timeOrReps==="time"),g(),M("ngIf",s.timeOrReps==="reps"),g(4),M("ngIf",s.isImageShowing),g(),M("ngIf",s.timeOrReps==="reps")}}var Qt=(()=>{let l=class l{constructor(a,t,c,r){this.apiService=a,this.gifService=t,this.modalController=c,this.route=r,this.comboDetails={comboWorkouts:[]},this.gifLoading=!1,this.SuperGif=null,this.isComboDownloading=!0,this.isImageShowing=!1,this.isResting=!1,this.isPlayingCombo=!1,this.currentPlayingIndex=0,this.restingText="Get Ready To Move",this.timeLeft=0,this.watchData=[],this.isCompleted=!1,this.videoWatchSubscription=new Be,this.watchCount=0,this.startTime=new Date,this.isPaused=!1,this.isComboCompleted=!1,this.userEmail=""}ngOnInit(){this.route.queryParamMap.subscribe(a=>{this.id=a.params.id,this.id&&this.apiService.getComboDetails(this.id).subscribe(t=>{this.combo=t,this.comboDetails.comboWorkouts=t.comboWorkouts,this.downloadCombos()})})}playComboFromScratch(){this.comboDetails.repeatCount=this.comboDetails.isRepeating?this.comboDetails.repeatCount:1,this.playBYOCombo("start")}startTimer(a,t){t=="resting"&&this.buzzerAudio.nativeElement.play(),this.timeLeft=a,this.interval=setInterval(()=>{this.timeLeft>0?(this.timeLeft<5&&this.timeLeft>=2&&this.isResting&&this.currentPlayingIndex+1!=this.comboDetails.comboWorkouts.length&&this.bellAudio.nativeElement.play(),this.timeLeft--):(this.pauseTimer(),t=="resting"&&(this.currentPlayingIndex=this.currentPlayingIndex+1),t=="start"&&(t="resting"),this.playBYOCombo(t))},1e3)}pauseTimer(){clearInterval(this.interval)}onImageLoad(){console.log("onImageLoad");let a=document.getElementById("img-gif");this.SuperGif=new rt.default({gif:a,includeDataURL:!0,on_end:()=>{var t;console.log("on end",this.timeLeft),!this.isPaused&&this.timeLeft>0?this.timeLeft--:((t=this.SuperGif)==null||t.pause(),this.isPaused||(this.isResting=!0,this.startTimer(this.comboDetails.comboWorkouts[this.currentPlayingIndex].restTime,"resting")))},loop_mode:!0,progressbar_height:2,progressbar_foreground_color:"#f91489",auto_play:!1,show_progress_bar:!0}),this.SuperGif.load(()=>{this.SuperGif.play()})}downloadCombos(){return ee(this,null,function*(){this.comboLeft=this.comboDetails.repeatCount-1,yield this.gifService.getGifs(),this.isComboDownloading=!0;for(let a=0;a<this.comboDetails.comboWorkouts.length;a++){let t=this.comboDetails.comboWorkouts[a].postDetails&&this.comboDetails.comboWorkouts[a].postDetails.media;try{t&&(yield this.gifService.saveGif(t))}catch(c){console.log(c)}}yield this.gifService.getGifs(),this.isComboDownloading=!1,setTimeout(()=>{let a=document.getElementById("playbtn");console.log("ele",a),a&&a.focus()},2e3)})}playBYOCombo(a){if(a=="start"&&(this.startTime=new Date,this.currentPlayingIndex=0),this.comboDetails.comboWorkouts.length>this.currentPlayingIndex)if(a=="start")this.isResting=!0,this.restingText="Get Ready To Move",this.startTimer(5,"start");else if(a!="playing"){this.restingText="Resting",this.isResting=!1,this.isPlayingCombo=!0;let t=this.comboDetails.comboWorkouts[this.currentPlayingIndex].postDetails.media;this.combo=this.comboDetails.comboWorkouts[this.currentPlayingIndex],this.timeOrReps=this.comboDetails.comboWorkouts[this.currentPlayingIndex].timeOrReps,this.imageSrc=this.gifService.getGif(t),this.comboDetails.comboWorkouts[this.currentPlayingIndex].timeOrReps=="reps"?this.timeLeft=this.comboDetails.comboWorkouts[this.currentPlayingIndex].timeOrRepsCount-1:(this.isImageShowing=!0,this.startTimer(this.comboDetails.comboWorkouts[this.currentPlayingIndex].timeOrRepsCount-1,"playing"))}else this.isImageShowing=!1,this.isResting=!0,this.startTimer(this.comboDetails.comboWorkouts[this.currentPlayingIndex].restTime,"resting");else if(this.comboDetails.isRepeating&&this.comboLeft!=0)this.comboLeft--,this.isResting=!0,this.currentPlayingIndex=0,this.startTimer(this.comboDetails.restTime,"start");else if(this.isResting=!1,this.isPlayingCombo=!1,this.isComboCompleted=!0,this.comboDetails.type=="user"){let t=new Date().getTime()-this.startTime.getTime();this.comboDetails.durationMinutes=this.convertToMinutes(t),this.updateCombo(this.convertToMinutes(t))}}convertToMinutes(a){let t=Math.floor(a/1e3),c=t%60,r=Math.floor(t/60);return c>=10?r+1:r}updateCombo(a){let t={durationMinutes:a}}pauseCombo(){this.SuperGif&&this.SuperGif.pause(),this.isPaused=!0,this.pauseTimer()}playCombo(){this.isPaused=!1;let a="playing";this.isResting&&(a="resting"),a=="resting"?(this.isResting=!0,this.startTimer(this.timeLeft,"resting")):this.comboDetails.comboWorkouts[this.currentPlayingIndex].timeOrReps!="reps"&&this.startTimer(this.timeLeft,"playing")}getWatchCount(){let a=this.watchData?this.watchData.filter(t=>t.comboId===String(this.comboId)):[];if(a.length>0){let t=Math.max.apply(Math,a.map(c=>c.watchCount));return t>1?t:0}else return 0}getMaxWatchCount(){return Math.max.apply(Math,this.watchData.map(a=>a.watchCount))}ngOnDestroy(){clearInterval(this.interval)}onMarkCompleteClicked(){return ee(this,null,function*(){})}checkMoodIconVisible(){return!!(this.watchData&&this.watchData.length)}openMoodList(){return ee(this,null,function*(){})}};l.\u0275fac=function(t){return new(t||l)(oe($e),oe(nt),oe(Ze),oe(je))},l.\u0275cmp=Fe({type:l,selectors:[["app-play-combo"]],viewQuery:function(t,c){if(t&1&&(_e(vt,5),_e(_t,5)),t&2){let r;ye(r=be())&&(c.bellAudio=r.first),ye(r=be())&&(c.buzzerAudio=r.first)}},decls:15,vars:4,consts:[["bellAudio",""],["buzzerAudio",""],["load",""],["controls","",1,"audio"],["src","assets/bell.mp3","type","audio/mpeg"],["src","assets/buzzer.mp3","type","audio/mpeg"],["size","12",2,"min-height","550px"],["class","empty-div",4,"ngIf"],["class","image-div",4,"ngIf"],[1,"empty-div"],["class","spinner-div",4,"ngIf"],["class","time-div",4,"ngIf"],[1,"spinner-div"],[1,"text-h"],[1,"time-div"],[1,"number-h"],[1,"ready-div"],["fill","outline","tabindex","0","id","playbtn",1,"primary-outline-button",3,"click"],[1,"d-flex"],["class","primary-outline-button","fill","outline",3,"click",4,"ngIf"],[1,"mx-2","d-flex","align-items-center"],["name","happy-outline","tabindex","0","style","font-size: 25px;",3,"click",4,"ngIf"],["fill","outline",1,"primary-outline-button",3,"click"],[4,"ngIf"],["class","d-flex align-items-center",4,"ngIf"],[1,"d-flex","align-items-center"],["name","checkmark-outline",1,"text-success"],["name","happy-outline","tabindex","0",2,"font-size","25px",3,"click"],["tabindex","0","id","playAgainbtn","fill","outline",1,"primary-outline-button",3,"click"],[1,"image-div"],[1,"play-head-view"],["class","my-0",4,"ngIf"],[1,"d-flex","justify-content-between","mb-3"],[1,"mb-0","mt-1","text-white"],["class","time mt-1 text-white me-2",4,"ngIf"],["id","pausebtn","tabindex","0",1,"btn-icon-primary",3,"click"],["height","550",3,"src",4,"ngIf"],[1,"my-0"],[1,"time","mt-1","text-white","me-2"],["height","550",3,"src"],["id","img-gif",0,"rel","auto_play","0",3,"load","hidden","src"]],template:function(t,c){t&1&&(f(0,"audio",3,0),ae(2,"source",4),k(3,` Your browser does not support the audio element.
`),h(),f(4,"audio",3,1),ae(6,"source",5),k(7,` Your browser does not support the audio element.
`),h(),f(8,"ion-grid")(9,"ion-row")(10,"ion-col",6),N(11,xt,3,2,"div",7)(12,Tt,10,2,"div",7)(13,Dt,6,0,"div",7)(14,Rt,14,6,"div",8),h()()()),t&2&&(g(11),M("ngIf",c.isComboDownloading||c.isResting),g(),M("ngIf",!c.isComboDownloading&&!c.isPlayingCombo&&!c.isResting&&!c.isPaused),g(),M("ngIf",c.isPaused),g(),M("ngIf",c.isPlayingCombo&&!c.isResting&&!c.isPaused))},dependencies:[Ke,He,Qe,qe,Xe,Je,Ye,Ve],styles:[".empty-div[_ngcontent-%COMP%]{background-color:#caced4;display:flex;justify-content:center;align-items:center;height:85%;flex-direction:column;padding:16px;width:100%}.empty-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.empty-div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.empty-div[_ngcontent-%COMP%]   .text-h[_ngcontent-%COMP%]{background-image:rgb(117,94,255);background-image:linear-gradient(230deg,#755eff,#e4e100);font-size:40px;-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;line-height:50px!important;text-align:center;font-weight:900;text-transform:uppercase}.empty-div[_ngcontent-%COMP%]   .spinner-div[_ngcontent-%COMP%], .empty-div[_ngcontent-%COMP%]   .ready-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.empty-div[_ngcontent-%COMP%]   .ready-div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff;padding:5px 24px;color:#000;font-size:18px;border-radius:23px;outline:none;border:none;width:inherit;margin-top:20px;margin-bottom:20px}.empty-div[_ngcontent-%COMP%]   .ready-div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}.empty-div[_ngcontent-%COMP%]   .time-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.empty-div[_ngcontent-%COMP%]   .time-div[_ngcontent-%COMP%]   .number-h[_ngcontent-%COMP%]{color:#fff;font-weight:900;font-size:160px;margin:20px 0;line-height:150px}.audio[_ngcontent-%COMP%]{display:none}.play-head-view[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.pause-btn[_ngcontent-%COMP%]{background:#00ccbd;padding:5px 24px;color:#000;font-size:18px;border-radius:23px;outline:none;border:none;width:inherit;margin-top:20px;margin-bottom:20px}.pause-btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}.img-size[_ngcontent-%COMP%]{width:24px;height:24px}"]});let o=l;return o})();export{Qt as PlayComboPage};
