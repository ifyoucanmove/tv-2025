<ion-content>
  <ion-grid class="tv-search-grid">
    <!-- Compact Search Header -->
    <ion-row>
      <ion-col size="12">
        <div class="search-header-tv">
          <h1>Search</h1>
          <p>Find challenges, workouts, recipes, and more</p>
        </div>
      </ion-col>
    </ion-row>

    <!-- Compact Search Input with Quick Actions -->
    <ion-row>
      <ion-col size="10" class="mx-auto">
        <div class="search-container-tv">
          <div class="search-box-tv">
            <ion-icon name="search" class="search-icon"></ion-icon>
            <input 
              #searchInput
              type="text" 
              class="search-input-tv" 
              placeholder="Type to search..."
              [value]="searchKeyword"
              (input)="onSearchInput($event)"
              (keydown.enter)="performSearch(searchKeyword)"
              tabindex="1">
            @if (searchKeyword.length > 0) {
              <ion-icon 
                name="close-circle" 
                class="clear-icon"
                (click)="clearSearch()"
                tabindex="2">
              </ion-icon>
            }
          </div>
          
          <!-- Quick Search Buttons -->
          <div class="quick-search-buttons">
            <button 
              class="quick-btn" 
              tabindex="3"
              (click)="quickSearch('Cardio')"
              (keydown.enter)="quickSearch('Cardio')">
              Cardio
            </button>
            <button 
              class="quick-btn" 
              tabindex="4"
              (click)="quickSearch('Strength')"
              (keydown.enter)="quickSearch('Strength')">
              Strength
            </button>
            <button 
              class="quick-btn" 
              tabindex="5"
              (click)="quickSearch('Yoga')"
              (keydown.enter)="quickSearch('Yoga')">
              Yoga
            </button>
            <button 
              class="quick-btn" 
              tabindex="6"
              (click)="quickSearch('Abs')"
              (keydown.enter)="quickSearch('Abs')">
              Abs
            </button>
          </div>
        </div>
      </ion-col>
    </ion-row>

    <!-- Loading State -->
    @if (isLoading) {
      <ion-row>
        <ion-col size="12" class="text-center">
          <div class="loading-container-tv">
            <ion-spinner name="crescent"></ion-spinner>
            <p>Searching...</p>
          </div>
        </ion-col>
      </ion-row>
    }

    <!-- Search Results - Compact TV Layout -->
    @if (showResults && !isLoading) {
      <ion-row>
        <ion-col size="12">
          <div class="results-container-tv">
            @if (searchResults.length > 0) {
              <div class="results-header-tv">
                <h2>{{ searchResults.length }} result{{ searchResults.length !== 1 ? 's' : '' }} found</h2>
              </div>
              
              <div class="results-grid-tv">
                @for (result of searchResults; track result.id; let i = $index) {
                  <div 
                    class="result-card-tv"
                    [attr.tabindex]="i + 8"
                    (click)="onResultClick(result)"
                    (keydown.enter)="onResultClick(result)"
                    (keydown.space)="onResultClick(result)">
                    
                    <div class="result-image-tv">
                      @if (result.image) {
                        <img [src]="result.image" [alt]="result.title" loading="lazy">
                      } @else {
                        <div class="placeholder-image-tv">
                          <ion-icon [name]="getResultIcon(result.type)"></ion-icon>
                        </div>
                      }
                      <div class="result-type-badge-tv" [class]="'badge-' + getResultColor(result.type)">
                        {{ getResultTypeName(result.type) }}
                      </div>
                    </div>
                    
                    <div class="result-content-tv">
                      <h3 class="result-title-tv">{{ result.title }}</h3>
                      @if (result.description) {
                        <p class="result-description-tv">{{ result.description }}</p>
                      }
                      @if (result.duration) {
                        <div class="result-meta-tv">
                          <ion-icon name="time-outline"></ion-icon>
                          <span>{{ result.duration }} min</span>
                        </div>
                      }
                    </div>
                    
                    <div class="result-arrow-tv">
                      <ion-icon name="chevron-forward"></ion-icon>
                    </div>
                  </div>
                }
              </div>
            } @else {
              <div class="no-results-tv">
                <ion-icon name="search-outline" class="no-results-icon"></ion-icon>
                <h3>No results found</h3>
                <p>Try one of the quick search buttons above</p>
              </div>
            }
          </div>
        </ion-col>
      </ion-row>
    }

    <!-- Initial State - Compact for TV -->
    @if (!showResults && !isLoading) {
      <ion-row>
        <ion-col size="12">
          <div class="initial-state-tv">
            <ion-icon name="search-outline" class="initial-icon"></ion-icon>
            <h3>Start searching</h3>
            <p>Use the quick search buttons or type to find content</p>
          </div>
        </ion-col>
      </ion-row>
    }

    <!-- Fallback State -->
    @if (!isLoading && !showResults && !isDataLoaded) {
      <ion-row>
        <ion-col size="12">
          <div class="fallback-state-tv">
            <ion-icon name="search-outline" class="fallback-icon"></ion-icon>
            <h3>Search Page</h3>
            <p>Loading search functionality...</p>
            <button (click)="loadSearchData()" class="retry-button-tv">Retry Loading</button>
          </div>
        </ion-col>
      </ion-row>
    }
  </ion-grid>
</ion-content>